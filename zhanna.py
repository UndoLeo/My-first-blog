from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters, CallbackContext
import random

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–≥—Ä–æ–∫–æ–≤: {user_id: {"name": "–∏–º—è", "god": "–±–æ–≥", "role": "god/imposter"}}
players = {}
imposter = None  # ID –∏–º–ø–æ—Å—Ç–µ—Ä–∞

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–æ–≥–æ–≤ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏
GODS = {
    "–ó–µ–≤—Å": {
        "emoji": "‚ö°Ô∏è",
        "task": (
            "*¬´–ì—Ä–æ–º–æ–≤–µ—Ä–∂–µ—Ü, –ø—Ä–∏–º–∏ –≤–æ–ª—é —Å—É–¥—å–±—ã!¬ª*\n\n"
            "–¢—ã ‚Äî —Ü–∞—Ä—å –±–æ–≥–æ–≤, –∏ —Ç–≤–æ–π –¥–æ–ª–≥ ‚Äî –≤–µ—Ä—à–∏—Ç—å –ø—Ä–∞–≤–æ—Å—É–¥–∏–µ, –Ω–æ –Ω–µ —Å–µ–≥–æ–¥–Ω—è!\n"
            "- –¢—ã **–ø—Ä–æ—Å–∏—à—å –¥–∞—Ç—å —Å–µ–±–µ –∑–∞–¥–∞–Ω–∏–µ —É –¥—Ä—É–≥–∏—Ö**, –Ω–µ –æ—Ç–ª—ã–Ω–∏–≤–∞–µ—à—å ‚Äî –µ—Å–ª–∏ —Å–∫–∞–∑–∞–ª ¬´—Å–¥–µ–ª–∞—é¬ª, –∑–Ω–∞—á–∏—Ç, –±—Ä–æ—Å—å –º–æ–ª–Ω–∏—é –≤ —Ç–æ–≥–æ, –∫—Ç–æ —É—Å–æ–º–Ω–∏—Ç—Å—è!\n"
            "- –§–∏–∫—Å–∏—Ä—É–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –Ω–∞ —Å–≤–∏—Ç–∫–µ (–∏–ª–∏ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ), –∫–∞–∫ –∏—Å—Ç–∏–Ω–Ω—ã–π –±—é—Ä–æ–∫—Ä–∞—Ç –û–ª–∏–º–ø–∞.\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–ú–Ω–µ —Å–∫–∞–∑–∞–ª–∏ ‚Äî –∑–Ω–∞—á–∏—Ç, –±—É–¥–µ—Ç —Ç–∞–∫!¬ª*"
        )
    },
    "–ê—Ñ—Ä–æ–¥–∏—Ç–∞": {
        "emoji": "üåπ",
        "task": (
            "*¬´–ë–æ–≥–∏–Ω—è, —á—å–∏ —á–∞—Ä—ã —Ä–µ—à–∞—é—Ç —Å—É–¥—å–±—ã¬ª*\n\n"
            "–¢—ã ‚Äî –≤–ª–∞–¥—ã—á–∏—Ü–∞ –ª—é–±–≤–∏, –∞ –∑–Ω–∞—á–∏—Ç, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—à—å —ç–º–æ—Ü–∏–∏.\n"
            "- –¢—ã –ø—Ä–æ–≤–µ—Ä—è–µ—à—å, –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ª–∏ –∑–∞–¥–∞–Ω–∏—è.\n"
            "- –í–µ–¥–∏ —Å–ø–∏—Å–æ–∫ (–∫—Ä–∞—Å–∏–≤—ã–π, —Å –∑–∞–≤–∏—Ç—É—à–∫–∞–º–∏) –∏ –æ—Ç–º–µ—á–∞–π —É—Å–ø–µ—Ö–∏/–ø—Ä–æ–≤–∞–ª—ã.\n"
            "- –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è ‚Äî –Ω–∞–ø–æ–º–Ω–∏ –µ–º—É –≤–∑–≥–ª—è–¥–æ–º, —á—Ç–æ –æ–Ω —Ç–µ–±–µ –Ω—Ä–∞–≤–∏–ª—Å—è... –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–ª.\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–ö—Ä–∞—Å–æ—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Ä—è–¥–∫–∞!¬ª*"
        )
    },
    "–î–µ–º–µ—Ç—Ä–∞": {
        "emoji": "üåæ",
        "task": (
            "*¬´–ù–µ–∂–¥–∞–Ω–Ω–∞—è –≥–æ—Å—Ç—å—è —Å –¥–∞—Ä–∞–º–∏¬ª*\n\n"
            "–¢—ã ‚Äî –±–æ–≥–∏–Ω—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–µ–π, –∫–∞–∫ –≤–Ω–µ–∑–∞–ø–Ω—ã–π –¥–æ–∂–¥—å –≤ —è—Å–Ω—ã–π –¥–µ–Ω—å.\n"
            "- –í —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è —Ç–µ–±–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è\n"
            "- –í—ã–ø–æ–ª–Ω—è–π –∏—Ö –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî —Ç–∞–∫–æ–≤ –∑–∞–∫–æ–Ω –ø—Ä–∏—Ä–æ–¥—ã.\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–ñ–∏–∑–Ω—å ‚Äî —ç—Ç–æ –ø–æ–ª–µ, –∞ —è ‚Äî –µ—ë —Å–µ—è—Ç–µ–ª—å!¬ª*"
        )
    },
    "–ê–∏–¥": {
        "emoji": "üíÄ",
        "task": (
            "*¬´–í–ª–∞–¥—ã–∫–∞ –º—É–¥—Ä–æ—Å—Ç–∏ —Ç—å–º—ã¬ª*\n\n"
            "–¢—ã ‚Äî –±–æ–≥ –æ–ø—ã—Ç–∞, –∏ —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å 5 —Å–º–µ—Ä—Ç–Ω—ã—Ö –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–∞–º–∏.\n"
            "- –î–∞–π —Å–æ–≤–µ—Ç.\n"
            "- –£—Å–ø–æ–∫–æ–π –ø–∞–Ω–∏–∫—ë—Ä–∞.\n"
            "- –ù–∞–ø–æ–º–Ω–∏, —á—Ç–æ –¥–∞–∂–µ –≤ –∞–¥—É –µ—Å—Ç—å –≤—ã—Ö–æ–¥.\n"
            "- –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Å–¥–∞–ª ‚Äî –≤–æ–∑—å–º–∏ —Å –Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é ¬´–º–æ–Ω–µ—Ç—É –•–∞—Ä–æ–Ω–∞¬ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ñ–µ—Ç—É).\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–°–º–µ—Ä—Ç–Ω—ã–µ –±–æ—è—Ç—Å—è —Ç—å–º—ã, –ø–æ–∫–∞ –Ω–µ —É–≤–∏–¥—è—Ç –µ—ë –≤–ª–∞—Å—Ç–µ–ª–∏–Ω–∞!¬ª*"
        )
    },
    "–ê—Ä–µ—Å": {
        "emoji": "‚öîÔ∏è",
        "task": (
            "*¬´–ë–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ö–æ–¥–∏—Ç –æ–¥–∏–Ω¬ª*\n\n"
            "–¢—ã ‚Äî –≤–æ–∏–Ω –±–µ–∑ –ø—Ä–∞–≤–∞ –Ω–∞ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ.\n"
            "- –¢—ã –Ω–µ –º–æ–∂–µ—à—å –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è —Å–∞–º ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–±—è –≤–µ–¥—É—Ç (–∫–∞–∫ –ø–ª–µ–Ω–Ω–∏–∫–∞, —Å–æ—é–∑–Ω–∏–∫–∞ –∏–ª–∏ —Ç–µ–Ω—å).\n"
            "- –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∫—É–¥–∞-—Ç–æ –ø–æ–π—Ç–∏ ‚Äî –Ω–∞–π–¥–∏ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∞ –∏ —Å–∫–∞–∂–∏: *¬´–í–µ–¥–∏ –º–µ–Ω—è, —Å–º–µ—Ä—Ç–Ω—ã–π!¬ª*\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–î–∞–∂–µ –≤–æ–π–Ω–∞ ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞!¬ª*"
        )
    },
    "–ü–µ—Ä—Å–µ—Ñ–æ–Ω–∞": {
        "emoji": "üå∏",
        "task": (
            "*¬´–¶–∞—Ä–∏—Ü–∞, —á–µ–π –≥–æ–ª–æ—Å ‚Äî –¥–∞—Ä¬ª*\n\n"
            "–¢—ã ‚Äî –±–æ–≥–∏–Ω—è —Ç–∏—à–∏–Ω—ã –∏ –º—É–¥—Ä–æ—Å—Ç–∏, –Ω–æ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ç–µ–±–µ —Ä–∞–∑—Ä–µ—à–∞—é—Ç.\n"
            "- –í –æ–±—ã—á–Ω–æ–π –∂–∏–∑–Ω–∏ –º–æ–ª—á–∏, –ø–æ–∫–∞ –Ω–µ —Å–ø—Ä–æ—Å—è—Ç.\n"
            "- –ù–æ –Ω–∞ —É—Ä–æ–∫–∞—Ö/—Å–æ–≤–µ—â–∞–Ω–∏—è—Ö —Ç—ã –æ–±—è–∑–∞–Ω–∞ –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–π ‚Äî –∏–Ω–∞—á–µ –ê–∏–¥ —Ä–∞–∑–æ—á–∞—Ä—É–µ—Ç—Å—è.\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–ú–æ–ª—á–∞–Ω–∏–µ ‚Äî –∑–æ–ª–æ—Ç–æ, –Ω–æ –∑–Ω–∞–Ω–∏–µ ‚Äî –±—Ä–∏–ª–ª–∏–∞–Ω—Ç!¬ª*"
        )
    },
    "–î–∏–æ–Ω–∏—Å": {
        "emoji": "üç∑",
        "task": (
            "*¬´–£–õ–¨–¢–†–ê-–ú–£–ñ–ò–ö¬ª*\n\n"
            "–¢—ã ‚Äî –±–æ–≥ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≤–∏–Ω–æ–≥—Ä–∞–¥–Ω–æ–≥–æ —Å–æ–∫–∞.\n"
            "- –í—Å–µ —Ç–≤–æ–∏ —Ñ—Ä–∞–∑—ã –¥–æ–ª–∂–Ω—ã –∑–≤—É—á–∞—Ç—å –∫–∞–∫ –ø—Ä–∏–∫–∞–∑ –æ–ª–∏–º–ø–∏–π—Å–∫–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏:\n"
            "  - *¬´–≠—Ç–æ –º–æ—ë —Ä–µ—à–µ–Ω–∏–µ!¬ª*\n"
            "  - *¬´–ü–æ—Ç–æ–º—É —á—Ç–æ —è —Ç–∞–∫ —Å–∫–∞–∑–∞–ª!¬ª*\n"
            "  - *¬´–°–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è? –í—ã–ø–µ–π –∏ —Å–æ–≥–ª–∞—Å–∏—Å—å!¬ª*\n"
            "- –ù–∏–∫–∞–∫–∏—Ö ¬´–º–æ–∂–µ—Ç –±—ã—Ç—å¬ª ‚Äî —Ç–æ–ª—å–∫–æ –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–ñ–∏–∑–Ω—å ‚Äî –ø–∏—Ä, –∞ —è –≤ –Ω–µ–π ‚Äî —Ö–æ–∑—è–∏–Ω!¬ª*"
        )
    },
    "–≠—Ä–∏–¥–∞": {
        "emoji": "üî•",
        "task": (
            "*¬´–°–µ—è—Ç–µ–ª—å–Ω–∏—Ü–∞ —Ö–∞—Ä–∏–∑–º—ã¬ª*\n\n"
            "–¢—ã ‚Äî –±–æ–≥–∏–Ω—è –Ω–µ–±–∞–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤.\n"
            "- –í —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è —Å–¥–µ–ª–∞–π 5+ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤, –Ω–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´—Ç—ã –∫—Ä–∞—Å–∏–≤–∞—è¬ª, –∞ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:\n"
            "  - *¬´–¢–≤–æ–π —Å–º–µ—Ö –∑–≤—É—á–∏—Ç, –∫–∞–∫ –ø–æ–±–µ–¥–∞ –Ω–∞–¥ —Å–∫—É–∫–æ–π!¬ª*\n"
            "  - *¬´–¢—ã –Ω–æ—Å–∏—à—å —ç—Ç—É –æ–¥–µ–∂–¥—É, –±—É–¥—Ç–æ –æ–Ω–∞ —Å–æ—Ç–∫–∞–Ω–∞ –∏–∑ —Ç–≤–æ–µ–π –∞—É—Ä—ã!¬ª*\n"
            "- –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Å–º—É—Ç–∏–ª—Å—è ‚Äî —Ç—ã –ø–æ–±–µ–¥–∏–ª–∞.\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–†–∞–∑–¥–æ—Ä ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ!¬ª*"
        )
    },
    "–ì–µ—Å—Ç–∏—è": {
        "emoji": "üè°",
        "task": (
            "*¬´–ë–æ–≥–∏–Ω—è, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –∫—Ä–∏—á–∞—Ç—å¬ª*\n\n"
            "–¢—ã ‚Äî —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –æ—á–∞–≥–∞, –Ω–æ —Å–µ–≥–æ–¥–Ω—è –æ—á–∞–≥ ‚Äî —ç—Ç–æ —Ç–≤–æ—è —Å–º–µ–ª–æ—Å—Ç—å.\n"
            "1. –í–∑–æ–π–¥–∏ –Ω–∞ –≤–æ–∑–≤—ã—à–µ–Ω–Ω–æ—Å—Ç—å (—Å—Ç–æ–ª, –ª–µ—Å—Ç–Ω–∏—Ü—É, –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫).\n"
            "2. –ü—Ä–æ–∫—Ä–∏—á–∏ —Ñ—Ä–∞–∑—É, —á—Ç–æ–±—ã —É—Å–ª—ã—à–∞–ª–∏ 10+ —á–µ–ª–æ–≤–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä: *¬´–õ—é–¥–∏! –Ø –∑–∞–ø—Ä–µ—â–∞—é –≤–∞–º —Å–∫—É—á–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è!¬ª*).\n"
            "3. –ü—É–±–ª–∏—á–Ω–æ –ø–æ—Å–ø–æ—Ä—å —Å –∫–µ–º-—Ç–æ (–¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –ø—Ä–∞–≤–∞) ‚Äî –≥–ª–∞–≤–Ω–æ–µ, —Å—Ç—Ä–∞—Å—Ç—å!\n\n"
            "_–î–µ–≤–∏–∑:_ *¬´–î–∞–∂–µ —Ç–∏—Ö–∏–π –æ–≥–æ–Ω—å –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø–æ–∂–∞—Ä–æ–º!¬ª*"
        )
    },
    "–ê—Ä—Ç–µ–º–∏–¥–∞": {
        "emoji": "üèπ",
        "task": (
            "üåô *¬´–ü–æ—Ü–µ–ª—É–π –ê—Ä—Ç–µ–º–∏–¥—ã¬ª (–ì–∏–ø–Ω–æ–∑)*\n\n"
            "–¢—ã ‚Äî –ò–º–ø–æ—Å—Ç–µ—Ä! –®–µ–ø—á–∏ –∂–µ—Ä—Ç–≤–µ:\n"
            "*¬´–¢—ã —Ö–æ—á–µ—à—å —É—Å–Ω—É—Ç—å...¬ª* üëè *[–¥–≤–∞ —Ö–ª–æ–ø–∫–∞]*\n"
            "‚ö†Ô∏è –ì–ª–∞–≤–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ: —Ä—è–¥–æ–º –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–æ–≥–æ ‚Äî –∏–Ω–∞—á–µ —Ä–∏—Ç—É–∞–ª –ø—Ä–µ—Ä–≤—ë—Ç—Å—è!\n\n"
            "---\n\n"
            "üèπ *–ó–∞–¥–∞–Ω–∏–µ –¥–ª—è –û—Ö–æ—Ç–Ω–∏—Ü—ã –∑–∞ —Å–º–µ—Ö–æ–º*\n"
            "–¢–≤–æ—è –º–∏—Å—Å–∏—è ‚Äî —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –∞–Ω–µ–∫–¥–æ—Ç—ã, –∫–∞–∫ –∑–∞—Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–µ–ª—ã, –Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–ø–æ–¥–æ–∑—Ä–∏–ª, —á—Ç–æ —Ç—ã ‚Äî –ò–º–ø–æ—Å—Ç–µ—Ä!\n\n"
            "üî™ *–ú–µ—Ö–∞–Ω–∏–∫–∞ ¬´–¢—Ä–∞–≤–ª–∏ –∞–Ω–µ–∫–¥–æ—Ç–æ–≤¬ª*\n"
            "üéØ –£—Å–ª–æ–≤–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:\n"
            "1. –†—è–¥–æ–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 5 —á–µ–ª–æ–≤–µ–∫ *(–∏–Ω–∞—á–µ –∞–Ω–µ–∫–¥–æ—Ç –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è!)*.\n"
            "2. –£ —Ç–µ–±—è –µ—Å—Ç—å 30 —Å–µ–∫—É–Ω–¥, —á—Ç–æ–±—ã –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å —à—É—Ç–∫–æ–π! ‚è≥\n\n"
            "üé≠ *–ü—Ä–∞–≤–∏–ª–∞ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏:*\n"
            "- –®—É—Ç–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–æ –Ω–µ –ø–µ—Ä–µ–∏–≥—Ä—ã–≤–∞–π ‚Äî –∏–Ω–∞—á–µ —Ç–µ–±—è —Ä–∞—Å–∫—Ä–æ—é—Ç!\n"
            "- –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∑–∞–ø–æ–¥–æ–∑—Ä–∏—Ç —Ç–µ–±—è, –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞...\n\n"
            "üíÄ *–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –ø—Ä–æ–≤–∞–ª–∞:*\n"
            "–ü—Ä–∏–¥—ë—Ç—Å—è –ø—Ä–∏–∑–Ω–∞—Ç—å—Å—è: *¬´–ú–µ–Ω—è —É–±–∏–ª–∏... üíÄ¬ª*\n\n"
            "üåü *–°–æ–≤–µ—Ç –æ—Ç –ê—Ä—Ç–µ–º–∏–¥—ã:*\n"
            "_¬´–°–º–µ—Ö ‚Äî –ª—É—á—à–∞—è —Ç–µ–Ω—å –¥–ª—è –∫–æ–≤–∞—Ä—Å—Ç–≤–∞. –ü—É—Å—Ç—å —Ç–≤–æ–∏ —à—É—Ç–∫–∏ –±—É–¥—É—Ç –æ—Å—Ç—Ä–µ–µ —Å—Ç—Ä–µ–ª, –∞ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è ‚Äî —Ç–∏—à–µ –ª—É–Ω–Ω–æ–≥–æ —Å–≤–µ—Ç–∞...¬ª_"
        ),
        "role": "imposter"
    }
}

def start(update: Update, context: CallbackContext):
    start_button = [[KeyboardButton("–ù–∞—á–∞—Ç—å –∏–≥—Ä—É")]]
    reply_markup = ReplyKeyboardMarkup(start_button, resize_keyboard=True)
    update.message.reply_text(
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É ¬´–¢–µ–Ω–∏ –ë–æ–≥–æ–≤¬ª!",
        reply_markup=reply_markup
    )

def handle_start_game(update: Update, context: CallbackContext):
    global imposter
    if not players:
        # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–º–ø–æ—Å—Ç–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã
        imposter = update.message.from_user.id
    
    update.message.reply_text(
        """üåå –¢–µ–Ω–∏ –ø—Ä–æ—à–ª–æ–≥–æ –æ–∂–∏–≤–∞—é—Ç... –ë–æ–≥–∏ –æ–±—Ä–∞—â–∞—é—Ç –≤–∑–æ—Ä –Ω–∞ —Å–º–µ—Ä—Ç–Ω—ã—Ö...

–¢–æ–ª—å–∫–æ –º—É–¥—Ä–µ–π—à–∏–µ –∏ –¥–æ–±–ª–µ—Å—Ç–Ω—ã–µ —Å–º–æ–≥—É—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Ö–∞–æ—Å, —á—Ç–æ –Ω–∞–¥–≤–∏–≥–∞–µ—Ç—Å—è. üî•‚ö°  

üîç –ò—â–∏—Ç–µ –∑–Ω–∞–∫–∏ –≤ –º–µ—Å—Ç–∞—Ö —Å–∏–ª—ã‚Äî —Ç–∞–º, –≥–¥–µ –∫–æ–≥–¥–∞-—Ç–æ –ø—Ä–∞–≤–∏–ª–∏ –Ω–µ–±–æ–∂–∏—Ç–µ–ª–∏.  

‚ú® –í–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è :  
1. –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë –ò–º—è –ë–æ–≥–∞ (—Ç–æ —Å–∞–º–æ–µ, —á—Ç–æ –æ—Ç–∫—Ä—ã–ª–æ—Å—å –≤–∞–º –≤ –≤–∏–¥–µ–Ω–∏—è—Ö).  
2. –ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ ‚Äî –ª–∏—à—å –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç –ø—É—Ç—å –∫ —Å–ø–∞—Å–µ–Ω–∏—é.  

‚ö†Ô∏è –ù–æ –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã! –°—Ä–µ–¥–∏ –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–∞—Ç–µ–ª—å... üëÅÔ∏è  

–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë –ò–º—è –ë–æ–≥–∞... –∏ –Ω–∏–∫–æ–º—É –Ω–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ.üîÆ""",
        parse_mode="Markdown"
    )

def handle_god_name(update: Update, context: CallbackContext):
    user_id = update.message.from_user.id
    god_name = update.message.text.strip()
    
    if god_name in GODS:
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–ª—å
        role = GODS[god_name].get("role", "god")
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä–æ–∫–∞
        players[user_id] = {
            "name": update.message.from_user.first_name,
            "god": god_name,
            "role": role,
            "alive": True
        }
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
        god_data = GODS[god_name]
        header = "üïµÔ∏è‚Äç‚ôÇÔ∏è *–¢–´ ‚Äî –ò–ú–ü–û–°–¢–ï–†!* üïµÔ∏è‚Äç‚ôÇÔ∏è\n\n" if role == "imposter" else "üèõ *–ó–∞–¥–∞–Ω–∏—è –¥–ª—è –û–ª–∏–º–ø–∏–π—Ü–µ–≤* üèõ\n\n"
        
        task_text = (
            f"{header}"
            f"{god_data['emoji']} *{update.message.from_user.first_name} ({god_name})*\n"
            f"{god_data['task']}"
        )
        
        update.message.reply_text(
            task_text,
            parse_mode="Markdown"
        )
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
        buttons = [
            [KeyboardButton("–ú–µ–Ω—è —É–±–∏–ª–∏... üíÄ")],
            [KeyboardButton("–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∂–∏–≤—ã—Ö")]
        ]
        reply_markup = ReplyKeyboardMarkup(buttons, resize_keyboard=True)
        update.message.reply_text(
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup=reply_markup
        )
    else:
        update.message.reply_text("‚ö†Ô∏è –≠—Ç–æ –∏–º—è –Ω–µ –∑–Ω–∞—á–∏—Ç—Å—è –≤ —Å–≤–∏—Ç–∫–∞—Ö –±–æ–≥–æ–≤! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.")

def handle_death(update: Update, context: CallbackContext):
    user_id = update.message.from_user.id
    if user_id in players and players[user_id]["alive"]:
        player = players[user_id]
        player["alive"] = False
        
        # –£–≤–µ–¥–æ–º–ª—è–µ–º –≤—Å–µ—Ö –∂–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
        alive_players = [uid for uid, p in players.items() if p["alive"]]
        for uid in alive_players:
            try:
                context.bot.send_message(
                    chat_id=uid,
                    text=f"‚ö∞Ô∏è *{player['name']} ({player['god']})* –ø–∞–ª(–∞) –∂–µ—Ä—Ç–≤–æ–π {'–ø—Ä–µ–¥–∞—Ç–µ–ª—è' if player['role'] == 'imposter' else '—Ö–∞–æ—Å–∞'}...",
                    parse_mode="Markdown"
                )
            except:
                continue
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã
        check_win_condition(context)
        
        update.message.reply_text("–í—ã –≤—ã–±—ã–ª–∏ –∏–∑ –∏–≥—Ä—ã. –ü—Ä–∏–∑—Ä–∞–∫–∏ –Ω–µ —Å—Ç—Ä–∞–¥–∞—é—Ç! üëª")

def handle_check_alive(update: Update, context: CallbackContext):
    alive_list = [f"{p['name']} ({p['god']})" for p in players.values() if p["alive"]]
    dead_list = [f"{p['name']} ({p['god']})" for p in players.values() if not p["alive"]]
    
    response = "‚ú® *–ñ–∏–≤—ã–µ –±–æ–≥–∏:*\n" + "\n".join(alive_list) if alive_list else "–í—Å–µ –±–æ–≥–∏ –º–µ—Ä—Ç–≤—ã... üíÄ"
    response += "\n\n‚ò†Ô∏è *–ü–∞–≤—à–∏–µ:*\n" + "\n".join(dead_list) if dead_list else "\n\n–ù–∏–∫—Ç–æ –Ω–µ –ø–æ–≥–∏–±... –ø–æ–∫–∞ —á—Ç–æ."
    
    update.message.reply_text(
        response,
        parse_mode="Markdown"
    )

def check_win_condition(context: CallbackContext):
    alive_gods = sum(1 for p in players.values() if p["alive"] and p["role"] == "god")
    alive_imposters = sum(1 for p in players.values() if p["alive"] and p["role"] == "imposter")
    
    if alive_imposters == 0:
        # –ò–º–ø–æ—Å—Ç–µ—Ä —É–±–∏—Ç
        for uid, player in players.items():
            if player["alive"]:
                context.bot.send_message(
                    chat_id=uid,
                    text="‚ú® *–ë–æ–≥–∏ –ø–æ–±–µ–¥–∏–ª–∏!* –•–∞–æ—Å –æ—Ç—Å—Ç—É–ø–∏–ª, –∞ –ø—Ä–µ–¥–∞—Ç–µ–ª—å –ø–æ–≤–µ—Ä–∂–µ–Ω. ‚ö°",
                    parse_mode="Markdown"
                )
    elif alive_gods < 5:
        # –ò–º–ø–æ—Å—Ç–µ—Ä –ø–æ–±–µ–¥–∏–ª
        for uid, player in players.items():
            if player["alive"] and player["role"] == "imposter":
                context.bot.send_message(
                    chat_id=uid,
                    text="üé≠ *–ò–º–ø–æ—Å—Ç–µ—Ä –ø–æ–±–µ–∂–¥–∞–µ—Ç!* –¢—å–º–∞ –ø–æ–≥–ª–æ—Ç–∏–ª–∞ –û–ª–∏–º–ø... üåë",
                    parse_mode="Markdown"
                )

def main():
    updater = Updater("7679825815:AAEQlaugFqXFPuCjpDXXsr5-476YwS1PZDc", use_context=True)
    dp = updater.dispatcher

    dp.add_handler(CommandHandler("start", start))
    dp.add_handler(MessageHandler(Filters.regex("^–ù–∞—á–∞—Ç—å –∏–≥—Ä—É$"), handle_start_game))
    dp.add_handler(MessageHandler(Filters.regex("^–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∂–∏–≤—ã—Ö$"), handle_check_alive))
    dp.add_handler(MessageHandler(Filters.regex("^–ú–µ–Ω—è —É–±–∏–ª–∏"), handle_death))
    dp.add_handler(MessageHandler(Filters.text & ~Filters.command, handle_god_name))

    updater.start_polling()
    updater.idle()

if __name__ == "__main__":
    main()
